"use strict";angular.module("simpleCharts",[]),angular.module("simpleCharts").directive("timeserieschart",function(){return{restrict:"A",scope:{data:"=",options:"="},link:function(scope,element,attributes){var bindTooltip=function(tooltipFormatter){return function(ev,pos,item){item?tooltipContainer.html(tooltipFormatter(item)).css({top:pos.pageY+10,left:pos.pageX+10,border:"1px solid "+item.series.color}).fadeIn(200):tooltipContainer.hide()}},chart=null,defaultOptions={xaxis:{mode:"time",tickFormatter:function(value){return moment(value).format("D.M")}},grid:{hoverable:!0,borderWidth:0},series:{color:"#397ab3",shadowSize:0}},options=$.extend(defaultOptions,attributes.options||{});element.addClass("simple-chart-chart"),$(element.append('<div></div><div class="simple-chart-tooltip"></div>'));var plotContainer=$(element.children()[0]),tooltipContainer=$(element.children()[1]);plotContainer.css({width:element[0].clientWidth,height:element[0].clientHeight}),scope.$watch("data",function(data){data&&(chart?(chart.setData(data),chart.setupGrid(),chart.draw()):(chart=$.plot(plotContainer,data,options),$(plotContainer).bind("plothover",bindTooltip(function(item){return moment(item.datapoint[0]).format("D.M.YYYY")+" : "+item.datapoint[1]}))))})}}});